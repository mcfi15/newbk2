$(document).ready((function(){let captchaIsLoad=!1;const captchaSiteKey=window.GLOBAL_VARIABLES.recaptchaSitekey,captchaSrc="https://www.google.com/recaptcha/api.js?render="+captchaSiteKey;let langUrl=window.GLOBAL_VARIABLES.langUrl;const loadScript=function(scriptUrl){return new Promise((res,rej)=>{const script=document.createElement("script");document.body.appendChild(script),script.onload=function(){res(!0)},script.onerror=function(e){rej(e)},script.src=scriptUrl})},excuteCaptcha=async function(captchaSiteKey){const token=await grecaptcha.execute(captchaSiteKey,{action:"validate_captcha"});return token},submitLeadForm=function(token){return new Promise((res,rej)=>{$("#leadform").prepend('<input type="hidden" name="g-recaptcha-response" value="'+token+'">'),$.ajax({url:langUrl+"/translate-leadform",type:"POST",data:new FormData($("form[name=leadform]")[0]),contentType:!1,cache:!1,processData:!1,beforeSend:function(){$("#l-loading").show(),$("button[name=btnSubmit]").prop("disabled",!0)},success:function(){var url=langUrl+"/leadform";$.ajax({url:url,type:"POST",data:new FormData($("form[name=leadform]")[0]),contentType:!1,cache:!1,processData:!1,success:function(dataJS){var data=JSON.parse(dataJS);void 0!==data.status&&"success"===data.status?($("form[name=leadform]").hide(),$("#l-loading").hide(),$("button[name=btnSubmit]").prop("disabled",!1),$.ajax({url:langUrl+"/getverifyform",type:"POST",success:function(response){$("#form-outer").append(response),$("button[name=btnSkip]").click((function(){$.ajax({url:langUrl+"/getcongratulationsform",type:"POST",beforeSend:function(){$("#l-loading").show()},success:function(response){$("#verificationForm").hide(),$("#form-outer").append(response),$("#l-loading").hide()}})})),$("button[name=btnSubmitVerification]").click((function(event){var valid=!0;""!=$("input[name=txtVerifyCode1]").val()&&""!=$("input[name=txtVerifyCode2]").val()&&""!=$("input[name=txtVerifyCode3]").val()&&""!=$("input[name=txtVerifyCode4]").val()&&""!=$("input[name=txtVerifyCode5]").val()&&""!=$("input[name=txtVerifyCode6]").val()||(valid=!1,$("#verifyCodeText").addClass("text-danger")),valid||event.preventDefault(),valid&&$.ajax({url:langUrl+"/getverifycode",type:"POST",data:new FormData($("form[name=verificationform]")[0]),contentType:!1,cache:!1,processData:!1,beforeSend:function(){$("#l-loading").show()},success:function(dataJS){var data=JSON.parse(dataJS);void 0!==data.status&&"success"===data.status?($("#verificationForm").hide(),$.ajax({url:langUrl+"/getcongratulationsform",type:"POST",success:function(response){$("#verificationForm").hide(),$("#form-outer").append(response),$("#l-loading").hide()}})):($("#l-loading").hide(),$("#verifyCodeText").addClass("text-danger"))}})}))}})):($("#l-loading").hide(),$("button[name=btnSubmit]").prop("disabled",!1),alert("We can't store your info now"))}})}})})};var profileTel=$("input[name=txtPhone]");profileTel.intlTelInput({autoPlaceholder:"off",initialCountry:window.GLOBAL_VARIABLES.initialCountry,preferredCountries:window.GLOBAL_VARIABLES.preferredCountries,formatOnDisplay:!0,utilsScript:window.GLOBAL_VARIABLES.utilsScript}),profileTel.intlTelInput("setNumber",window.GLOBAL_VARIABLES.profileTelSetNumber);var country_code_number=profileTel.intlTelInput("getSelectedCountryData").dialCode;$("input[name=txt_country_code_number]").val(country_code_number);var isValidNumber=!0;profileTel.blur((function(){var phone_number=profileTel.intlTelInput("getNumber");$("input[name=txt_phone_number]").val(phone_number);var country_code_number=profileTel.intlTelInput("getSelectedCountryData").dialCode;$("input[name=txt_country_code_number]").val(country_code_number),isValidNumber=profileTel.intlTelInput("isValidNumber");var country_data=profileTel.intlTelInput("getSelectedCountryData");$("input[name=txt_iso2]").val(country_data.iso2),$("input[name=txtCommunicationChannelNumber]").val(profileTel.val()),$("input[name=txtPhoneNumberCommunicationChannel]").val(phone_number),$("input[name=txtPhoneIso2CommunicationChannel]").val(country_data.iso2)}));var communicationChannelNumber=$("#txtCommunicationChannelNumber");communicationChannelNumber.intlTelInput({autoPlaceholder:"off",initialCountry:window.GLOBAL_VARIABLES.initialCountry,preferredCountries:window.GLOBAL_VARIABLES.preferredCountries,formatOnDisplay:!0,utilsScript:window.GLOBAL_VARIABLES.utilsScript}),communicationChannelNumber.intlTelInput("setNumber",window.GLOBAL_VARIABLES.commoSetNumber);var isValidCommunicationChannelNumber=!0,communicationChannel;function AppViewModel(){this.typeOfCommunicationChannel=ko.observable("")}communicationChannelNumber.blur((function(){if(formVM.typeOfCommunicationChannel()==window.GLOBAL_VARIABLES.typePhone){var phone_number=communicationChannelNumber.intlTelInput("getNumber");$("input[name=txtPhoneNumberCommunicationChannel]").val(phone_number),isValidCommunicationChannelNumber=communicationChannelNumber.intlTelInput("isValidNumber");var country_data=communicationChannelNumber.intlTelInput("getSelectedCountryData");$("input[name=txtPhoneIso2CommunicationChannel]").val(country_data.iso2)}})),$("button[name=btnSubmit]").click((async function(event){var valid=!0;if(0==$("#slService").val()?(valid=!1,$(".msg-service").text(window.GLOBAL_VARIABLES.txtPleaseSelectATopics),$("#slService").parent().addClass("has-error")):($(".msg-service").text(""),$("#slService").parent().removeClass("has-error")),0==$("#communication_chanel").val()?(valid=!1,$(".msg-communication-channel").text(window.GLOBAL_VARIABLES.txtPleaseSelectCommunicationChannel),$("#communication_chanel").parent().addClass("has-error")):($(".msg-communication-channel").text(""),$("#communication_chanel").parent().removeClass("has-error")),""==$("input[name=txtName]").val()?(valid=!1,$(".msg-name").text(window.GLOBAL_VARIABLES.txtPleaseEnterYourFullName),$("input[name=txtName]").parent().addClass("has-error")):($(".msg-name").text(""),$("input[name=txtName]").parent().removeClass("has-error")),""==$("input[name=txtEmail]").val()?(valid=!1,$(".msg-email").text(window.GLOBAL_VARIABLES.txtEnterEmail),$("input[name=txtEmail]").parent().addClass("has-error")):emailValid($("input[name=txtEmail]").val())?($(".msg-email").text(""),$("input[name=txtEmail]").parent().removeClass("has-error")):(valid=!1,$(".msg-email").text(window.GLOBAL_VARIABLES.txtEmailInvalid),$("input[name=txtEmail]").parent().addClass("has-error")),""==$("input[name=txtPhone]").val()?(valid=!1,$(".msg-phone").text(window.GLOBAL_VARIABLES.txtPleaseEnterPhoneNumber),$("input[name=txtPhone]").parent().addClass("has-error")):isValidNumber?($(".msg-phone").text(""),$("input[name=txtPhone]").parent().removeClass("has-error")):(valid=!1,$(".msg-phone").text(window.GLOBAL_VARIABLES.txtPhoneNumberInvalid),$("input[name=txtPhone]").parent().addClass("has-error")),formVM.typeOfCommunicationChannel()==window.GLOBAL_VARIABLES.typePhone&&(""==$("input[name=txtCommunicationChannelNumber]").val()?(valid=!1,$(".msg-phone-communication").text(window.GLOBAL_VARIABLES.txtPleaseEnterPhoneNumber),$("input[name=txtCommunicationChannelNumber]").parent().addClass("has-error")):isValidCommunicationChannelNumber?($(".msg-phone-communication").text(""),$("input[name=txtCommunicationChannelNumber]").parent().removeClass("has-error")):(valid=!1,$(".msg-phone-communication").text(window.GLOBAL_VARIABLES.txtPhoneNumberInvalid),$("input[name=txtCommunicationChannelNumber]").parent().addClass("has-error"))),formVM.typeOfCommunicationChannel()==window.GLOBAL_VARIABLES.typeText&&(""==$("input[name=txtCommunicationChannelID]").val()?(valid=!1,$(".msg-communication-id").text(window.GLOBAL_VARIABLES.txtPleaseEnterId),$("input[name=txtCommunicationChannelID]").parent().addClass("has-error")):($(".msg-communication-id").text(""),$("input[name=txtCommunicationChannelID]").parent().removeClass("has-error"))),formVM.typeOfCommunicationChannel()==window.GLOBAL_VARIABLES.typeOther&&(""==$("input[name=txtCommunicationChannelID]").val()?(valid=!1,$(".msg-communication-id").text(window.GLOBAL_VARIABLES.txtPleaseEnterId),$("input[name=txtCommunicationChannelID]").parent().addClass("has-error")):($(".msg-communication-id").text(""),$("input[name=txtCommunicationChannelID]").parent().removeClass("has-error")),""==$("input[name=txtCommunicationChannelOther]").val()?(valid=!1,$(".msg-communication-channel-other").text(window.GLOBAL_VARIABLES.txtPleaseEnterOtherChannel),$("input[name=txtCommunicationChannelOther]").parent().addClass("has-error")):($(".msg-communication-channel-other").text(""),$("input[name=txtCommunicationChannelOther]").parent().removeClass("has-error"))),valid||event.preventDefault(),valid)if($(this).prop("disabled",!0),$("#l-loading").show(),captchaIsLoad){const token=await excuteCaptcha(captchaSiteKey);await submitLeadForm(token),$(this).prop("disabled",!1)}else{const success=await loadScript(captchaSrc);success&&setTimeout(async()=>{const token=await excuteCaptcha(captchaSiteKey);captchaIsLoad=""!==token,await submitLeadForm(token),$(this).prop("disabled",!1)},1500)}})),$("#communication_chanel").on("change",(function(){var self,cur,type=$(this).find("option:selected").attr("communication-channel-type");$("#txtCommunicationChannelType").val(type),formVM.typeOfCommunicationChannel(type),$("input[name=txtCommunicationChannelID]").val("").parent().removeClass("has-error"),$("input[name=txtCommunicationChannelNumber]").parent().removeClass("has-error"),$("input[name=txtCommunicationChannelOther]").val("").parent().removeClass("has-error"),$(".msg-communication-channel-other").text(""),$(".msg-communication-id").text(""),$(".msg-phone-communication").text("")}));var formVM=new AppViewModel;function emailValid(email){var re;return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email)}ko.applyBindings(formVM),$("#slCountry").change((function(){var country=$("#slCountry option:selected").val();""==country?$("select[name=slcState]").closest(".form-group").css("display","none"):$.ajax({type:"GET",cashe:!1,url:langUrl+"/country-get-state-leadform",data:{country_code:country},dataType:"json",success:function(response){$("#slState").val(""),200===response.code&&"success"===response.message&&response.data.length>0?($("#slState").html(window.GLOBAL_VARIABLES.txtPleaseSelect+response.data),$("#state").removeClass("hidden")):$("#state").addClass("hidden")}})})).trigger("change")}));